/**
 * Â© 2025 Melvin Jones Repol. All rights reserved.
 * This project is licensed under the MIT License with Commons Clause.
*/
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/QBdflEP7.js","assets/Cn32OB1o.js","assets/Dph47E3T.js","assets/DyGPnA2_.js","assets/Dg4gVdE3.js","assets/t8mI9RYm.js","assets/uZNeay-J.js","assets/DUYG9vXX.js","assets/DKQ8yKpg.js","assets/dCWYowMn.js","assets/InIMjYBq.js","assets/BeLtu-UY.js","assets/YAh4y49R.js","assets/CFrBDmKk.js","assets/CGa6wk7G.js","assets/k-NSAY8B.js","assets/DLoPGEpw.js","assets/Bud0EmM2.js","assets/DQcpn1Ea.js","assets/BUTH-fPQ.js","assets/Ca9hs0uL.js","assets/hqVdLbZn.js","assets/D0N3IP90.js","assets/C111EtUu.css","assets/tOhiOcWi.js","assets/BF8Nn9lh.js"])))=>i.map(i=>d[i]);
import{R as e,j as r,r as t}from"./Cn32OB1o.js";import{c as o}from"./CGa6wk7G.js";import{u as s,a as n,P as i}from"./DyGPnA2_.js";import"./BFlcZtwJ.js";import{L as a,m as l}from"./InIMjYBq.js";import{P as c}from"./uZNeay-J.js";import{C as d,a as m,b as u,u as p}from"./YAh4y49R.js";import{A as h}from"./Dph47E3T.js";import{u as f,N as j,O as g,B as w,R as x,a as y}from"./DQcpn1Ea.js";import{l as v}from"./BPjVUy-D.js";import{a as E}from"./BTvahscA.js";import{a as _}from"./BXEMiIsG.js";import"./k-NSAY8B.js";import"./Dg4gVdE3.js";import"./BeLtu-UY.js";import"./CFrBDmKk.js";import"./DLoPGEpw.js";import"./Bud0EmM2.js";import"./BUTH-fPQ.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&r(e)})).observe(document,{childList:!0,subtree:!0})}function r(e){if(e.ep)return;e.ep=!0;const r=function(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?r.credentials="include":"anonymous"===e.crossOrigin?r.credentials="omit":r.credentials="same-origin",r}(e);fetch(e.href,r)}}();const S={},b=function(e,r,t){let o=Promise.resolve();if(r&&r.length>0){let e=function(e){return Promise.all(e.map((e=>Promise.resolve(e).then((e=>({status:"fulfilled",value:e})),(e=>({status:"rejected",reason:e}))))))};document.getElementsByTagName("link");const t=document.querySelector("meta[property=csp-nonce]"),s=(null==t?void 0:t.nonce)||(null==t?void 0:t.getAttribute("nonce"));o=e(r.map((e=>{if((e=function(e){return"/"+e}(e))in S)return;S[e]=!0;const r=e.endsWith(".css"),t=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${t}`))return;const o=document.createElement("link");return o.rel=r?"stylesheet":"modulepreload",r||(o.as="script"),o.crossOrigin="",o.href=e,s&&o.setAttribute("nonce",s),document.head.appendChild(o),r?new Promise(((r,t)=>{o.addEventListener("load",r),o.addEventListener("error",(()=>t(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}function s(e){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=e,window.dispatchEvent(r),!r.defaultPrevented)throw e}return o.then((r=>{for(const e of r||[])"rejected"===e.status&&s(e.reason);return e().catch(s)}))};class k extends e.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,r){var t;if(null==(t=null==e?void 0:e.message)?void 0:t.includes("Loading chunk"))return window.location.reload();console.error("Error caught by ErrorBoundary: ",e,r),this.setState({error:e,errorInfo:r})}render(){var e,t;return this.state.hasError&&!(null==(t=null==(e=this.state.error)?void 0:e.message)?void 0:t.includes("Loading chunk"))?r.jsxs(d,{className:"border-2 border border-danger m-5 rounded-3",children:[r.jsx("h1",{className:"mt-4",children:"Something went wrong."}),this.state.errorInfo&&r.jsx("code",{children:this.state.errorInfo.componentStack}),r.jsxs("p",{className:"text-muted small mt-5",children:["Report issues at"," ",r.jsx("a",{href:"mailto:mrepol742@gmail.com",children:"mrepol742@gmail.com"})]}),r.jsx(m,{color:"primary",onClick:()=>window.location.reload(),className:"mt-3",children:"Reload"})]}):this.props.children}}k.propTypes={children:c.node};const P=()=>{const[e,o]=t.useState("loading"),i=s(),a=n((e=>e.user));f();const l=cookies.get("session_id"),[c,d]=t.useState(null);let m="/login";"/"!=window.location.pathname&&(m=`/login?n=${window.location.pathname}${window.location.search}`);return t.useEffect((()=>{(async()=>{if(!l)return d(!1);if(a&&Object.keys(a).length>0)return d(!0);try{const e=await axios.post("/auth/verify-session",{session_id:l});i({type:"SET_USER",payload:e.data.user}),d(!0)}catch(e){cookies.remove("session_id"),window.location.href=m}})()}),[]),null===c?r.jsx("div",{className:(l?"":"bg-dark")+" text-center p-3",children:r.jsx(u,{color:"primary",variant:"grow"})}):c?r.jsx(g,{}):r.jsx(j,{to:m,replace:!0})},L=t.lazy((()=>b((()=>import("./QBdflEP7.js").then((e=>e.D))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23])))),R=t.lazy((()=>b((()=>import("./tOhiOcWi.js")),__vite__mapDeps([24,1,2,12,6,13,14,15,16,17,10,11])))),C=t.lazy((()=>b((()=>import("./BF8Nn9lh.js")),__vite__mapDeps([25,1,2,12,6,13,14,15,16,17])))),N=()=>{h.init();const{isColorModeSet:e,setColorMode:o}=p("coreui-free-react-admin-template-theme"),s=n((e=>e.theme));return t.useEffect((()=>{const r=new URLSearchParams(window.location.href.split("?")[1]),t=r.get("theme")&&r.get("theme").match(/^[A-Za-z0-9\s]+/)[0];t&&o(t),e()||o(s)}),[]),r.jsxs("div",{children:[r.jsx(w,{children:r.jsx(t.Suspense,{fallback:r.jsx("div",{className:"pt-3 text-center",children:r.jsx(u,{color:"primary",variant:"grow"})}),children:r.jsx(k,{children:r.jsxs(x,{children:[r.jsx(y,{path:"/login",element:r.jsx(R,{})}),r.jsxs(y,{element:r.jsx(P,{}),children:[r.jsx(y,{path:"/logout",element:r.jsx(C,{})}),r.jsx(y,{path:"*",element:r.jsx(L,{})})]})]})})})}),r.jsx(a,{theme:s,transition:l})]})},A={sidebarShow:!0,theme:"light",user:null},I=v(((e=A,r)=>"SET_USER"===r.type?{...e,user:r.payload}:e)),O=["/login","/register"],T=E.create({baseURL:"http://localhost:8000/api",timeout:3e4,headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});T.interceptors.response.use((e=>e),(e=>{var r;return[401,403].includes(null==(r=e.response)?void 0:r.status)&&!O.includes(window.location.pathname)&&(_.remove("session_id"),window.location.href="/login"),Promise.reject(e)})),window.axios=T,window.cookies=_,o.createRoot(document.getElementById("root")).render(r.jsx(i,{store:I,children:r.jsx(N,{})}));export{b as _};
