/**
 * Â© 2025 Melvin Jones Repol. All rights reserved.
 * This project is licensed under the MIT License with Commons Clause.
*/
import{r as e,j as s}from"./Cn32OB1o.js";import{H as a}from"./t8mI9RYm.js";import{F as t,u as r,v as i}from"./CdjoWadd.js";import{y as l}from"./InIMjYBq.js";import{c as o,a as c,d as n,R as d,S as m,a1 as j,a2 as x,N as p,i as h,j as g,k as u,l as f,m as b,n as C}from"./YAh4y49R.js";import{a as y,A as N}from"./D5-ZjZcB.js";import{u as v}from"./DQcpn1Ea.js";import"./Dph47E3T.js";import"./uZNeay-J.js";import"./DUYG9vXX.js";import"./DKQ8yKpg.js";import"./BeLtu-UY.js";import"./CFrBDmKk.js";import"./CGa6wk7G.js";import"./k-NSAY8B.js";import"./DLoPGEpw.js";import"./Bud0EmM2.js";import"./B_HKkPT_.js";import"./DyGPnA2_.js";import"./Dg4gVdE3.js";import"./BFlcZtwJ.js";import"./BPjVUy-D.js";import"./BTvahscA.js";import"./BXEMiIsG.js";import"./BUTH-fPQ.js";import"./Ca9hs0uL.js";import"./hqVdLbZn.js";import"./D0N3IP90.js";const _=()=>{const[a,t]=e.useState([]),[r,i]=e.useState({name:"",code:"",barcode:"",unit_measurement:"",category:"",active:!0,default_quantity:!0,age_restriction:0,description:"",taxes:0,cost_price:0,markup:0,sale_price:0,color:"",image:null}),h=e=>{const{id:s,value:a}=e.target;i((e=>({...e,[s]:a})))},g=e=>{const{id:s,checked:a}=e.target;i((e=>({...e,[s]:a})))};return e.useEffect((()=>{(async()=>{const[e]=await Promise.all([axios.get("/categories")]);t(e.data)})()}),[]),s.jsxs(o,{onSubmit:e=>{e.preventDefault(),axios.post("/products",r).then((e=>{if(e.data.error)return l.error(e.data.error);l.success("Product created successfully"),i({name:"",code:"",barcode:"",unit_measurement:"",category:"",active:!0,default_quantity:!0,age_restriction:0,description:"",taxes:0,cost_price:0,markup:0,sale_price:0,color:"",image:null})})).catch((e=>{console.error("Error adding product:",e)}))},className:"p-2",children:[s.jsxs("div",{className:"d-flex justify-content-between",children:[s.jsx("h3",{className:"mb-3",children:"New Product"}),s.jsxs("div",{children:[s.jsx(c,{color:"secondary",className:"me-2",size:"sm",children:"Cancel"}),s.jsx(c,{color:"primary",size:"sm",type:"submit",children:"Save"})]})]}),s.jsx("h5",{children:"Details"}),s.jsx(n,{type:"text",id:"name",floatingClassName:"mb-3",floatingLabel:"Name",onChange:h,placeholder:"",required:!0}),s.jsxs(d,{children:[s.jsx(m,{xs:12,md:6,children:s.jsx(n,{type:"text",id:"code",floatingClassName:"mb-3",floatingLabel:"Code",onChange:h,placeholder:""})}),s.jsx(m,{xs:12,md:6,children:s.jsx(n,{type:"text",id:"barcode",floatingClassName:"mb-3",floatingLabel:"Barcode",onChange:h,placeholder:""})})]}),s.jsxs(d,{children:[s.jsx(m,{xs:12,md:6,children:s.jsx(n,{type:"text",id:"unit_measurement",floatingClassName:"mb-3",floatingLabel:"Unit of Measurement",onChange:h,placeholder:""})}),s.jsx(m,{xs:12,md:6,children:s.jsx(j,{id:"category_id",floatingClassName:"mb-3",floatingLabel:"Category",onChange:e=>{const{id:s,value:a}=e.target;i((e=>({...e,[s]:a})))},options:[{label:"Select a category",value:""},...a.map((e=>({label:e.name,value:e.id})))]})})]}),s.jsx(x,{onChange:g,label:"Active",id:"is_active",defaultChecked:!0}),s.jsx(x,{onChange:g,label:"Default Quantity",id:"default_quantity",defaultChecked:!0}),s.jsx(n,{type:"number",id:"age_restriction",floatingClassName:"mb-3",floatingLabel:"Age Restriction",onChange:h,placeholder:""}),s.jsx(n,{type:"text",id:"description",floatingClassName:"mb-3",floatingLabel:"Description",onChange:h,placeholder:""}),s.jsx("h5",{children:"Price"}),s.jsxs(d,{children:[s.jsx(m,{xs:12,md:6,children:s.jsx(n,{type:"number",id:"taxes",floatingClassName:"mb-3",floatingLabel:"Taxes %",onChange:h,placeholder:""})}),s.jsx(m,{xs:12,md:6,children:s.jsx(n,{type:"number",id:"cost_price",floatingClassName:"mb-3",floatingLabel:"Cost",onChange:h,placeholder:""})})]}),s.jsxs(d,{children:[s.jsx(m,{xs:12,md:6,children:s.jsx(n,{type:"number",id:"markup",floatingClassName:"mb-3",floatingLabel:"Markup",onChange:h,placeholder:""})}),s.jsx(m,{xs:12,md:6,children:s.jsx(n,{type:"number",id:"sale_price",floatingClassName:"mb-3",floatingLabel:"Sale Price",onChange:h,placeholder:""})})]}),s.jsx("h5",{children:"Image & Color"}),s.jsx(n,{type:"text",id:"color",floatingClassName:"mb-3",floatingLabel:"Color",onChange:h,placeholder:""}),s.jsxs("div",{className:"mb-3",children:[s.jsx(n,{type:"file",id:"image",onChange:e=>{const s=e.target.files[0];if(s){const e=new FileReader;e.onloadend=()=>{i((s=>({...s,image:e.result})))},e.readAsDataURL(s)}},accept:"image/*",className:"mb-2"}),s.jsx(c,{color:"secondary",className:"me-2",size:"sm",onClick:()=>{i((e=>({...e,image:null})))},children:"Clear"})]}),r.image&&s.jsx(p,{src:r.image,className:"img-fluid mb-3",alt:"Selected image",style:{maxWidth:"150px",maxHeight:"150px"}})]})},P=()=>{v();const[o,n]=e.useState([]),[d,m]=e.useState(1),[j,x]=e.useState(0),[p,P]=e.useState(0),[S,k]=e.useState(!1),[L,w]=e.useState(!1),[z,A]=e.useState(!1);e.useEffect((()=>{q(d)}),[d]);const q=async e=>{try{const s=await axios.get("/products/all",{params:{page:e}});if(s.data.error)return l.error(s.data.error);n(s.data.data),x(s.data.totalPages),m(s.data.currentPage),P(s.data.itemCount)}catch(s){console.error("Error fetching Products:",s)}};return s.jsxs("div",{children:[s.jsx(a,{children:s.jsx("title",{children:"Products - Project POS"})}),s.jsx(y,{data:{showAppModal:S,setShowAppModal:k},children:s.jsx(_,{})}),s.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[s.jsxs("div",{children:[s.jsx("h1",{children:"Products"}),s.jsxs("span",{children:[p.toLocaleString()," Products"]})]}),s.jsxs("div",{children:[s.jsx(c,{size:"sm",className:"me-1",color:"primary",onClick:()=>alert("Import Products"),children:"Import"}),s.jsx(c,{size:"sm",className:"me-1",color:"primary",onClick:()=>(async()=>{window.open("http://localhost:8000/api/export/products","_blank")})(),children:"Export"}),s.jsx(c,{size:"sm",color:"primary",onClick:()=>k(!0),children:"Add"})]})]}),0===o.length?s.jsx("div",{className:"d-flex justify-content-center align-items-center",children:s.jsx("h3",{children:"Loading products..."})}):s.jsxs(s.Fragment,{children:[s.jsxs(h,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[s.jsx(g,{children:s.jsxs(u,{children:[s.jsx(f,{scope:"col",children:"Name"}),s.jsx(f,{scope:"col",children:"Code"}),s.jsx(f,{scope:"col",children:"Barcode"}),s.jsx(f,{scope:"col",children:"Quantity"}),s.jsx(f,{scope:"col",children:"Cost Price"}),s.jsx(f,{scope:"col",children:"Sale Price"}),s.jsx(f,{scope:"col",children:"Stock"}),s.jsx(f,{scope:"col",children:"Category"}),s.jsx(f,{scope:"col"})]})}),s.jsx(b,{children:o.map(((e,a)=>s.jsxs(u,{children:[s.jsx(C,{children:e.name}),s.jsx(C,{children:e.code}),s.jsx(C,{children:e.barcode}),s.jsx(C,{children:e.quantity}),s.jsx(C,{children:e.cost_price}),s.jsx(C,{children:e.sale_price}),s.jsx(C,{children:e.is_active?"Yes":"No"}),s.jsx(C,{children:e.category.name}),s.jsx(C,{children:s.jsxs("div",{className:"d-flex",children:[s.jsx(c,{size:"sm",color:"primary",onClick:()=>alert(`Edit ${e.name}`),children:s.jsx(t,{icon:r})}),s.jsx(c,{size:"sm",color:"danger",onClick:()=>alert(`Delete ${e.name}`),className:"ms-2 text-white",children:s.jsx(t,{icon:i})})]})})]},e.id)))})]}),s.jsx(N,{currentPage:d,setCurrentPage:m,totalPages:j,setTotalPages:x})]})]})};export{P as default};
