/**
 * Â© 2025 Melvin Jones Repol. All rights reserved.
 * This project is licensed under the MIT License with Commons Clause.
*/
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Cwy0f9Mo.js","assets/QC5vPiN9.js","assets/CIV2xMzx.js","assets/D1366AgG.js","assets/CBhXu_vv.js","assets/Vwz4urAK.js","assets/DEA7gE6q.js","assets/DrPDZbur.js","assets/BvQcBku0.js","assets/CNTFux7v.js","assets/DugxoI_f.js","assets/CKpO31bV.js","assets/BeLtu-UY.js","assets/C6WlzKMn.js","assets/B_AfaIMK.js","assets/BLfjdmXG.js","assets/CuPG8W_I.js","assets/CD0Ur-HC.js","assets/Bud0EmM2.js","assets/BWKriypK.js","assets/CEDJOVJu.js","assets/Bi3V5Iik.js","assets/D0N3IP90.js","assets/C111EtUu.css","assets/CYW1eeEO.js","assets/DpmZoliI.js"])))=>i.map(i=>d[i]);
import{R as e,j as r,r as t}from"./QC5vPiN9.js";import{c as o}from"./BLfjdmXG.js";import{u as s,a as n,P as i}from"./D1366AgG.js";import"./B_QUkDTQ.js";import{L as a,m as l}from"./CKpO31bV.js";import{P as c}from"./DEA7gE6q.js";import{C as d,a as m,b as u,u as p}from"./C6WlzKMn.js";import{A as h}from"./CIV2xMzx.js";import{u as f,N as j,O as g,B as w,R as y,a as x}from"./BWKriypK.js";import{l as v}from"./DmgXf5fm.js";import{a as E}from"./VSpmzgsF.js";import{a as _}from"./BXEMiIsG.js";import"./CuPG8W_I.js";import"./CBhXu_vv.js";import"./BeLtu-UY.js";import"./B_AfaIMK.js";import"./CD0Ur-HC.js";import"./Bud0EmM2.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&r(e)}).observe(document,{childList:!0,subtree:!0})}function r(e){if(e.ep)return;e.ep=!0;const r=function(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?r.credentials="include":"anonymous"===e.crossOrigin?r.credentials="omit":r.credentials="same-origin",r}(e);fetch(e.href,r)}}();const b={},S=function(e,r,t){let o=Promise.resolve();if(r&&r.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const t=document.querySelector("meta[property=csp-nonce]"),s=(null==t?void 0:t.nonce)||(null==t?void 0:t.getAttribute("nonce"));o=e(r.map(e=>{if((e=function(e){return"/"+e}(e))in b)return;b[e]=!0;const r=e.endsWith(".css"),t=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${t}`))return;const o=document.createElement("link");return o.rel=r?"stylesheet":"modulepreload",r||(o.as="script"),o.crossOrigin="",o.href=e,s&&o.setAttribute("nonce",s),document.head.appendChild(o),r?new Promise((r,t)=>{o.addEventListener("load",r),o.addEventListener("error",()=>t(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function s(e){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=e,window.dispatchEvent(r),!r.defaultPrevented)throw e}return o.then(r=>{for(const e of r||[])"rejected"===e.status&&s(e.reason);return e().catch(s)})};class k extends e.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,r){var t;if(null==(t=null==e?void 0:e.message)?void 0:t.includes("Loading chunk"))return window.location.reload();console.error("Error caught by ErrorBoundary: ",e,r),this.setState({error:e,errorInfo:r})}render(){var e,t;return this.state.hasError&&!(null==(t=null==(e=this.state.error)?void 0:e.message)?void 0:t.includes("Loading chunk"))?r.jsxs(d,{className:"border-2 border border-danger m-5 rounded-3",children:[r.jsx("h1",{className:"mt-4",children:"Something went wrong."}),this.state.errorInfo&&r.jsx("code",{children:this.state.errorInfo.componentStack}),r.jsxs("p",{className:"text-muted small mt-5",children:["Report issues at"," ",r.jsx("a",{href:"mailto:mrepol742@gmail.com",children:"mrepol742@gmail.com"})]}),r.jsx(m,{color:"primary",onClick:()=>window.location.reload(),className:"mt-3",children:"Reload"})]}):this.props.children}}k.propTypes={children:c.node};const P=()=>{const[e,o]=t.useState("loading"),i=s(),a=n(e=>e.user);f();const l=cookies.get("session_id"),[c,d]=t.useState(null);let m="/login";"/"!=window.location.pathname&&(m=`/login?n=${window.location.pathname}${window.location.search}`);return t.useEffect(()=>{(async()=>{if(!l)return d(!1);if(a&&Object.keys(a).length>0)return d(!0);try{const e=await axios.post("/auth/verify-session",{session_id:l});i({type:"SET_USER",payload:e.data.user}),d(!0)}catch(e){cookies.remove("session_id"),window.location.href=m}})()},[]),null===c?r.jsx("div",{className:(l?"":"bg-dark")+" text-center p-3",children:r.jsx(u,{color:"primary",variant:"grow"})}):c?r.jsx(g,{}):r.jsx(j,{to:m,replace:!0})},L=t.lazy(()=>S(()=>import("./Cwy0f9Mo.js").then(e=>e.D),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]))),R=t.lazy(()=>S(()=>import("./CYW1eeEO.js"),__vite__mapDeps([24,1,2,13,6,14,15,16,17,18,11,12]))),C=t.lazy(()=>S(()=>import("./DpmZoliI.js"),__vite__mapDeps([25,1,2,13,6,14,15,16,17,18]))),N=()=>{h.init();const{colorMode:e,isColorModeSet:o,setColorMode:i}=p("coreui-free-react-admin-template-theme"),c=s(),d=n(e=>e.theme);return t.useEffect(()=>{const r=new URLSearchParams(window.location.href.split("?")[1]),t=r.get("theme")&&r.get("theme").match(/^[A-Za-z0-9\s]+/)[0];if(t&&i(t),o())return c({type:"set",theme:e});i(d)},[]),r.jsxs("div",{children:[r.jsx(w,{children:r.jsx(t.Suspense,{fallback:r.jsx("div",{className:"pt-3 text-center",children:r.jsx(u,{color:"primary",variant:"grow"})}),children:r.jsx(k,{children:r.jsxs(y,{children:[r.jsx(x,{path:"/login",element:r.jsx(R,{})}),r.jsxs(x,{element:r.jsx(P,{}),children:[r.jsx(x,{path:"/logout",element:r.jsx(C,{})}),r.jsx(x,{path:"*",element:r.jsx(L,{})})]})]})})})}),r.jsx(a,{theme:d,transition:l})]})},A={sidebarShow:!0,sidebarUnfoldable:!1,theme:"light",user:null},I=v((e=A,r)=>"SET_USER"===r.type?{...e,user:r.payload}:{...e,...r}),O=["/login","/register"],T=E.create({baseURL:"http://localhost:8000/api",timeout:3e4,headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});T.interceptors.response.use(e=>e,e=>{var r;return[401,403].includes(null==(r=e.response)?void 0:r.status)&&!O.includes(window.location.pathname)&&(_.remove("session_id"),window.location.href="/login"),Promise.reject(e)}),window.axios=T,window.cookies=_,o.createRoot(document.getElementById("root")).render(r.jsx(i,{store:I,children:r.jsx(N,{})}));export{S as _};
