/**
 * Â© 2025 Melvin Jones Repol. All rights reserved.
 * This project is licensed under the MIT License with Commons Clause.
*/
import{r as e,j as s}from"./Cn32OB1o.js";import{H as r}from"./t8mI9RYm.js";import{y as a}from"./InIMjYBq.js";import{F as t,f as l}from"./CMJEcyR7.js";import{c as i,v as o,w as n,d as c,x as d,a as m,i as j,j as x,k as h,l as p,m as u,n as f}from"./C6Ar4aP7.js";import{a as g,A as b}from"./CxTRSNhW.js";import{u as v}from"./DQcpn1Ea.js";import"./Dph47E3T.js";import"./uZNeay-J.js";import"./DUYG9vXX.js";import"./DKQ8yKpg.js";import"./BeLtu-UY.js";import"./CFrBDmKk.js";import"./CGa6wk7G.js";import"./k-NSAY8B.js";import"./DLoPGEpw.js";import"./Bud0EmM2.js";import"./CR30QrPc.js";import"./DyGPnA2_.js";import"./Dg4gVdE3.js";import"./BFlcZtwJ.js";import"./BPjVUy-D.js";import"./BTvahscA.js";import"./BXEMiIsG.js";import"./BUTH-fPQ.js";import"./Ca9hs0uL.js";import"./hqVdLbZn.js";import"./D0N3IP90.js";const C=()=>{const[r,j]=e.useState([]),[x,h]=e.useState({name:"",email:"",phone:"",address:"",username:"",password:"",status:"",role:""}),p=e=>{const{id:s,value:r}=e.target;h((e=>({...e,[s]:r})))},u=e=>{const{id:s,value:r}=e.target;h((e=>({...e,[s]:r})))};return e.useEffect((()=>{(async()=>{const[e]=await Promise.all([axios.get("/roles")]);j(e.data)})()}),[]),s.jsxs(i,{onSubmit:e=>{e.preventDefault(),axios.post("/users",x).then((e=>{if(e.data.error)return a.error(e.data.error);a.success(`${x.name} created successfully`),h({name:"",email:"",phone:"",address:"",username:"",password:"",status:"",role:""})})).catch((e=>{console.error("Error creating user:",e),a.error(`Failed to create user ${x.name}`)}))},className:"p-2",children:[s.jsxs("div",{className:"d-flex align-items-center mb-3 fs-5",children:[s.jsx(t,{icon:l,className:"me-2"}),"New User"]}),s.jsx(o,{children:s.jsx(n,{xs:12,md:6,children:s.jsx(c,{type:"text",id:"name",floatingClassName:"mb-3",floatingLabel:"Name",onChange:p,placeholder:"",required:!0})})}),s.jsxs(o,{children:[s.jsx(n,{xs:12,md:6,children:s.jsx(c,{type:"email",id:"email",floatingClassName:"mb-3",floatingLabel:"Email",onChange:p,placeholder:"",required:!0})}),s.jsx(n,{xs:12,md:6,children:s.jsx(c,{type:"number",id:"phone",floatingClassName:"mb-3",floatingLabel:"Phone",onChange:p,placeholder:"",required:!0})})]}),s.jsxs(o,{children:[s.jsx(n,{xs:12,md:6,children:s.jsx(c,{type:"text",id:"username",floatingClassName:"mb-3",floatingLabel:"Username",onChange:p,placeholder:"",required:!0})}),s.jsx(n,{xs:12,md:6,children:s.jsx(d,{id:"role",floatingClassName:"mb-3",floatingLabel:"Role",onChange:u,options:[{label:"Select a role",value:""},...r.map((e=>{return{label:(s=e.name.replace(/_/g," "),s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()),value:e.name};var s}))],required:!0})})]}),s.jsxs(o,{children:[s.jsx(n,{xs:12,md:6,children:s.jsx(d,{id:"status",floatingClassName:"mb-3",floatingLabel:"Status",onChange:u,options:[{label:"Select a status",value:""},{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}],required:!0})}),s.jsx(n,{xs:12,md:6,children:s.jsx(c,{type:"text",id:"password",floatingClassName:"mb-3",floatingLabel:"Password",onChange:p,placeholder:"",required:!0})})]}),s.jsxs("div",{className:"d-flex justify-content-end mt-3",children:[s.jsx(m,{color:"secondary",className:"me-2",size:"sm",children:"Cancel"}),s.jsx(m,{color:"primary",size:"sm",type:"submit",children:"Add User"})]})]})},y=()=>{v();const[t,l]=e.useState([]),[i,o]=e.useState(1),[n,c]=e.useState(0),[d,y]=e.useState(0),[N,S]=e.useState(!1),[w,P]=e.useState(!0);e.useEffect((()=>{L(i)}),[i]);const L=async e=>{try{const s=await axios.get("/users",{params:{page:e}});if(s.data.error)return a.error(s.data.error);l(s.data.data),c(s.data.totalPages),o(s.data.currentPage),y(s.data.itemCount)}catch(s){console.error("Error fetching Users:",s),a.error("Failed to fetch users list")}finally{P(!1)}};return s.jsxs("div",{children:[s.jsx(r,{children:s.jsx("title",{children:"Users - Project POS"})}),s.jsx(g,{data:{showAppModal:N,setShowAppModal:S},children:s.jsx(C,{})}),s.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[s.jsxs("div",{children:[s.jsx("h1",{children:"Users"}),s.jsxs("span",{children:[d.toLocaleString()," Users"]})]}),s.jsxs("div",{children:[s.jsx(m,{size:"sm",className:"me-1",color:"primary",onClick:()=>(async()=>{window.open("http://localhost:8000/api/export/users","_blank")})(),children:"Export"}),s.jsx(m,{size:"sm",color:"primary",onClick:()=>S(!0),children:"Add"})]})]}),w&&s.jsx("div",{className:"d-flex justify-content-center align-items-center",children:s.jsx("h3",{children:"Loading users..."})}),0==t.length&&!w&&s.jsx("div",{className:"d-flex justify-content-center align-items-center",children:s.jsx("h3",{children:"No users yet"})}),t.length>0&&s.jsxs(s.Fragment,{children:[s.jsxs(j,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[s.jsx(x,{children:s.jsxs(h,{children:[s.jsx(p,{scope:"col",children:"Name"}),s.jsx(p,{scope:"col",children:"Username"}),s.jsx(p,{scope:"col",children:"Role"}),s.jsx(p,{scope:"col",children:"Email"}),s.jsx(p,{scope:"col",children:"Phone"}),s.jsx(p,{scope:"col",children:"Status"}),s.jsx(p,{scope:"col"})]})}),s.jsx(u,{children:t.map(((e,r)=>s.jsxs(h,{children:[s.jsx(f,{children:e.name}),s.jsx(f,{children:e.username}),s.jsx(f,{children:e.role}),s.jsx(f,{children:e.email}),s.jsx(f,{children:e.phone}),s.jsx(f,{children:e.status}),s.jsx(f,{children:s.jsxs("div",{className:"d-flex",children:[s.jsx(m,{size:"sm",color:"primary",onClick:()=>alert(`Edit ${e.name}`),children:"Edit"}),s.jsx(m,{size:"sm",color:"danger",onClick:()=>alert(`Delete ${e.name}`),className:"ms-2",children:"Delete"})]})})]},e.id)))})]}),s.jsx(b,{currentPage:i,setCurrentPage:o,totalPages:n,setTotalPages:c})]})]})};export{y as default};
