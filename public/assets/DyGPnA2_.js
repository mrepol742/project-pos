/**
 * Â© 2025 Melvin Jones Repol. All rights reserved.
 * This project is licensed under the MIT License with Commons Clause.
*/
import{r as t}from"./Cn32OB1o.js";import{w as e}from"./Dg4gVdE3.js";var n={notify(){},get:()=>[]};var r=(()=>!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement))(),o=(()=>"undefined"!=typeof navigator&&"ReactNative"===navigator.product)(),u=(()=>r||o?t.useLayoutEffect:t.useEffect)(),s=Symbol.for("react-redux-context"),c="undefined"!=typeof globalThis?globalThis:{};function i(){if(!t.createContext)return{};const e=c[s]??(c[s]=new Map);let n=e.get(t.createContext);return n||(n=t.createContext(null),e.set(t.createContext,n)),n}var a=i();var l=function(e){const{children:r,context:o,serverState:s,store:c}=e,i=t.useMemo((()=>{const t=function(t){let e,r=n,o=0,u=!1;function s(){a.onStateChange&&a.onStateChange()}function c(){o++,e||(e=t.subscribe(s),r=function(){let t=null,e=null;return{clear(){t=null,e=null},notify(){(()=>{let e=t;for(;e;)e.callback(),e=e.next})()},get(){const e=[];let n=t;for(;n;)e.push(n),n=n.next;return e},subscribe(n){let r=!0;const o=e={callback:n,next:null,prev:e};return o.prev?o.prev.next=o:t=o,function(){r&&null!==t&&(r=!1,o.next?o.next.prev=o.prev:e=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}())}function i(){o--,e&&0===o&&(e(),e=void 0,r.clear(),r=n)}const a={addNestedSub:function(t){c();const e=r.subscribe(t);let n=!1;return()=>{n||(n=!0,e(),i())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:s,isSubscribed:function(){return u},trySubscribe:function(){u||(u=!0,c())},tryUnsubscribe:function(){u&&(u=!1,i())},getListeners:()=>r};return a}(c);return{store:c,subscription:t,getServerState:s?()=>s:void 0}}),[c,s]),l=t.useMemo((()=>c.getState()),[c]);u((()=>{const{subscription:t}=i;return t.onStateChange=t.notifyNestedSubs,t.trySubscribe(),l!==c.getState()&&t.notifyNestedSubs(),()=>{t.tryUnsubscribe(),t.onStateChange=void 0}}),[i,l]);const f=o||a;return t.createElement(f.Provider,{value:i},r)};function f(e=a){return function(){return t.useContext(e)}}var b=f();function d(t=a){const e=t===a?b:f(t),n=()=>{const{store:t}=e();return t};return Object.assign(n,{withTypes:()=>n}),n}var v=d();function p(t=a){const e=t===a?v:d(t),n=()=>e().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var S=p(),g=(t,e)=>t===e;function y(n=a){const r=n===a?b:f(n),o=(n,o={})=>{const{equalityFn:u=g}="function"==typeof o?{equalityFn:o}:o,s=r(),{store:c,subscription:i,getServerState:a}=s;t.useRef(!0);const l=t.useCallback({[n.name]:t=>n(t)}[n.name],[n]),f=e.useSyncExternalStoreWithSelector(i.addNestedSub,c.getState,a||c.getState,l,u);return t.useDebugValue(f),f};return Object.assign(o,{withTypes:()=>o}),o}var x=y();export{l as P,x as a,S as u};
