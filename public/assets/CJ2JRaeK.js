/**
 * Â© 2025 Melvin Jones Repol. All rights reserved.
 * This project is licensed under the MIT License with Commons Clause.
*/
import{r as e,j as s}from"./Cn32OB1o.js";import{H as a}from"./t8mI9RYm.js";import{y as r}from"./InIMjYBq.js";import{c as t,a as l,R as i,S as n,d as o,a1 as c,i as d,j as m,k as j,l as h,m as x,n as p}from"./YAh4y49R.js";import{a as u,A as g}from"./tfufcxjh.js";import{u as f}from"./DQcpn1Ea.js";import"./Dph47E3T.js";import"./uZNeay-J.js";import"./DUYG9vXX.js";import"./DKQ8yKpg.js";import"./BeLtu-UY.js";import"./CFrBDmKk.js";import"./CGa6wk7G.js";import"./k-NSAY8B.js";import"./DLoPGEpw.js";import"./Bud0EmM2.js";import"./DzU0iCrx.js";import"./DyGPnA2_.js";import"./Dg4gVdE3.js";import"./BFlcZtwJ.js";import"./BPjVUy-D.js";import"./BTvahscA.js";import"./BXEMiIsG.js";import"./BUTH-fPQ.js";import"./CdjoWadd.js";import"./Ca9hs0uL.js";import"./hqVdLbZn.js";import"./D0N3IP90.js";const b=()=>{const[a,d]=e.useState([]),[m,j]=e.useState({name:"",email:"",phone:"",address:"",username:"",password:"",status:"",role:""}),h=e=>{const{id:s,value:a}=e.target;j((e=>({...e,[s]:a})))},x=e=>{const{id:s,value:a}=e.target;j((e=>({...e,[s]:a})))};return e.useEffect((()=>{(async()=>{const[e]=await Promise.all([axios.get("/roles")]);d(e.data)})()}),[]),s.jsxs(t,{onSubmit:e=>{e.preventDefault(),axios.post("/users",m).then((e=>{if(e.data.error)return r.error(e.data.error);r.success(`${m.name} created successfully`),j({name:"",email:"",phone:"",address:"",username:"",password:"",status:"",role:""})})).catch((e=>{console.error("Error creating user:",e),r.error(`Failed to create user ${m.name}`)}))},className:"p-2",children:[s.jsxs("div",{className:"d-flex justify-content-between",children:[s.jsx("h3",{className:"mb-3",children:"New User"}),s.jsxs("div",{children:[s.jsx(l,{color:"secondary",className:"me-2",size:"sm",children:"Cancel"}),s.jsx(l,{color:"primary",size:"sm",type:"submit",children:"Save"})]})]}),s.jsx(i,{children:s.jsx(n,{xs:12,md:6,children:s.jsx(o,{type:"text",id:"name",floatingClassName:"mb-3",floatingLabel:"Name",onChange:h,placeholder:"",required:!0})})}),s.jsxs(i,{children:[s.jsx(n,{xs:12,md:6,children:s.jsx(o,{type:"email",id:"email",floatingClassName:"mb-3",floatingLabel:"Email",onChange:h,placeholder:"",required:!0})}),s.jsx(n,{xs:12,md:6,children:s.jsx(o,{type:"number",id:"phone",floatingClassName:"mb-3",floatingLabel:"Phone",onChange:h,placeholder:"",required:!0})})]}),s.jsxs(i,{children:[s.jsx(n,{xs:12,md:6,children:s.jsx(o,{type:"text",id:"username",floatingClassName:"mb-3",floatingLabel:"Username",onChange:h,placeholder:"",required:!0})}),s.jsx(n,{xs:12,md:6,children:s.jsx(c,{id:"role",floatingClassName:"mb-3",floatingLabel:"Role",onChange:x,options:[{label:"Select a role",value:""},...a.map((e=>({label:e.name,value:e.id})))]})})]}),s.jsxs(i,{children:[s.jsx(n,{xs:12,md:6,children:s.jsx(c,{id:"status",floatingClassName:"mb-3",floatingLabel:"Status",onChange:x,options:[{label:"Select a status",value:""},{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}]})}),s.jsx(n,{xs:12,md:6,children:s.jsx(o,{type:"text",id:"password",floatingClassName:"mb-3",floatingLabel:"Password",onChange:h,placeholder:"",required:!0})})]})]})},v=()=>{f();const[t,i]=e.useState([]),[n,o]=e.useState(1),[c,v]=e.useState(0),[y,C]=e.useState(0),[N,S]=e.useState(!1),[w,P]=e.useState(!0);e.useEffect((()=>{E(n)}),[n]);const E=async e=>{try{const s=await axios.get("/users",{params:{page:e}});if(s.data.error)return r.error(s.data.error);i(s.data.data),v(s.data.totalPages),o(s.data.currentPage),C(s.data.itemCount)}catch(s){console.error("Error fetching Users:",s),r.error("Failed to fetch users list")}finally{P(!1)}};return s.jsxs("div",{children:[s.jsx(a,{children:s.jsx("title",{children:"Users - Project POS"})}),s.jsx(u,{data:{showAppModal:N,setShowAppModal:S},children:s.jsx(b,{})}),s.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[s.jsxs("div",{children:[s.jsx("h1",{children:"Users"}),s.jsxs("span",{children:[y.toLocaleString()," Users"]})]}),s.jsxs("div",{children:[s.jsx(l,{size:"sm",className:"me-1",color:"primary",onClick:()=>(async()=>{window.open("http://localhost:8000/api/export/users","_blank")})(),children:"Export"}),s.jsx(l,{size:"sm",color:"primary",onClick:()=>S(!0),children:"Add"})]})]}),w&&s.jsx("div",{className:"d-flex justify-content-center align-items-center",children:s.jsx("h3",{children:"Loading users..."})}),0==t.length&&s.jsx("div",{className:"d-flex justify-content-center align-items-center",children:s.jsx("h3",{children:"No users yet"})}),t.length>0&&s.jsxs(s.Fragment,{children:[s.jsxs(d,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[s.jsx(m,{children:s.jsxs(j,{children:[s.jsx(h,{scope:"col",children:"Name"}),s.jsx(h,{scope:"col",children:"Username"}),s.jsx(h,{scope:"col",children:"Role"}),s.jsx(h,{scope:"col",children:"Email"}),s.jsx(h,{scope:"col",children:"Phone"}),s.jsx(h,{scope:"col",children:"Status"}),s.jsx(h,{scope:"col"})]})}),s.jsx(x,{children:t.map(((e,a)=>s.jsxs(j,{children:[s.jsx(p,{children:e.name}),s.jsx(p,{children:e.username}),s.jsx(p,{children:e.role}),s.jsx(p,{children:e.email}),s.jsx(p,{children:e.phone}),s.jsx(p,{children:e.status}),s.jsx(p,{children:s.jsxs("div",{className:"d-flex",children:[s.jsx(l,{size:"sm",color:"primary",onClick:()=>alert(`Edit ${e.name}`),children:"Edit"}),s.jsx(l,{size:"sm",color:"danger",onClick:()=>alert(`Delete ${e.name}`),className:"ms-2",children:"Delete"})]})})]},e.id)))})]}),s.jsx(g,{currentPage:n,setCurrentPage:o,totalPages:c,setTotalPages:v})]})]})};export{v as default};
