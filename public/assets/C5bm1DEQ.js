/**
 * Â© 2025 Melvin Jones Repol. All rights reserved.
 * This project is licensed under the MIT License with Commons Clause.
*/
import{r as e,j as s}from"./Cn32OB1o.js";import{H as a}from"./t8mI9RYm.js";import{c as r,a as t,R as l,S as i,d as o,a1 as n,i as c,j as d,k as m,l as j,m as h,n as x}from"./YAh4y49R.js";import{a as p,A as u}from"./OYNRyfEe.js";import{u as g}from"./DQcpn1Ea.js";import"./Dph47E3T.js";import"./uZNeay-J.js";import"./DUYG9vXX.js";import"./DKQ8yKpg.js";import"./CFrBDmKk.js";import"./CGa6wk7G.js";import"./k-NSAY8B.js";import"./DLoPGEpw.js";import"./Bud0EmM2.js";import"./Bgaed4T3.js";import"./DyGPnA2_.js";import"./Dg4gVdE3.js";import"./BFlcZtwJ.js";import"./InIMjYBq.js";import"./BeLtu-UY.js";import"./BPjVUy-D.js";import"./BTvahscA.js";import"./BXEMiIsG.js";import"./BUTH-fPQ.js";import"./CdjoWadd.js";import"./Ca9hs0uL.js";import"./hqVdLbZn.js";import"./D0N3IP90.js";const f=()=>{const[a,c]=e.useState([]),[d,m]=e.useState({name:"",email:"",phone:"",address:"",username:"",password:"",status:"",role:""}),j=e=>{const{id:s,value:a}=e.target;m((e=>({...e,[s]:a})))},h=e=>{const{id:s,value:a}=e.target;m((e=>({...e,[s]:a})))};return e.useEffect((()=>{(async()=>{const[e]=await Promise.all([axios.get("/roles")]);c(e.data)})()}),[]),s.jsxs(r,{onSubmit:e=>{e.preventDefault(),axios.post("/users",d).then((e=>{if(e.data.error)return toast.error(e.data.error);toast.success("User created successfully"),m({name:"",email:"",phone:"",address:"",username:"",password:"",status:"",role:""})})).catch((e=>{console.error("Error adding product:",e)}))},className:"p-2",children:[s.jsxs("div",{className:"d-flex justify-content-between",children:[s.jsx("h3",{className:"mb-3",children:"New User"}),s.jsxs("div",{children:[s.jsx(t,{color:"secondary",className:"me-2",size:"sm",children:"Cancel"}),s.jsx(t,{color:"primary",size:"sm",type:"submit",children:"Save"})]})]}),s.jsx(l,{children:s.jsx(i,{xs:12,md:6,children:s.jsx(o,{type:"text",id:"name",floatingClassName:"mb-3",floatingLabel:"Name",onChange:j,placeholder:"",required:!0})})}),s.jsxs(l,{children:[s.jsx(i,{xs:12,md:6,children:s.jsx(o,{type:"email",id:"email",floatingClassName:"mb-3",floatingLabel:"Email",onChange:j,placeholder:"",required:!0})}),s.jsx(i,{xs:12,md:6,children:s.jsx(o,{type:"number",id:"phone",floatingClassName:"mb-3",floatingLabel:"Phone",onChange:j,placeholder:"",required:!0})})]}),s.jsxs(l,{children:[s.jsx(i,{xs:12,md:6,children:s.jsx(o,{type:"text",id:"username",floatingClassName:"mb-3",floatingLabel:"Username",onChange:j,placeholder:"",required:!0})}),s.jsx(i,{xs:12,md:6,children:s.jsx(n,{id:"role",floatingClassName:"mb-3",floatingLabel:"Role",onChange:h,options:[{label:"Select a role",value:""},...a.map((e=>({label:e.name,value:e.id})))]})})]}),s.jsxs(l,{children:[s.jsx(i,{xs:12,md:6,children:s.jsx(n,{id:"status",floatingClassName:"mb-3",floatingLabel:"Status",onChange:h,options:[{label:"Select a status",value:""},{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}]})}),s.jsx(i,{xs:12,md:6,children:s.jsx(o,{type:"text",id:"password",floatingClassName:"mb-3",floatingLabel:"Password",onChange:j,placeholder:"",required:!0})})]})]})},b=()=>{g();const[r,l]=e.useState([]),[i,o]=e.useState(1),[n,b]=e.useState(0),[v,C]=e.useState(0),[y,N]=e.useState(!1);e.useEffect((()=>{S(i)}),[i]);const S=async e=>{try{const s=await axios.get("/users",{params:{page:e}});if(s.data.error)return toast.error(s.data.error);l(s.data.data),b(s.data.totalPages),o(s.data.currentPage),C(s.data.itemCount)}catch(s){console.error("Error fetching Users:",s)}};return s.jsxs("div",{children:[s.jsx(a,{children:s.jsx("title",{children:"Users - Project POS"})}),s.jsx(p,{data:{showAppModal:y,setShowAppModal:N},children:s.jsx(f,{})}),s.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[s.jsxs("div",{children:[s.jsx("h1",{children:"Users"}),s.jsxs("span",{children:[v.toLocaleString()," Users"]})]}),s.jsxs("div",{children:[s.jsx(t,{size:"sm",className:"me-1",color:"primary",onClick:()=>(async()=>{window.open("http://localhost:8000/api/export/users","_blank")})(),children:"Export"}),s.jsx(t,{size:"sm",color:"primary",onClick:()=>N(!0),children:"Add"})]})]}),0===r.length?s.jsx("div",{className:"d-flex justify-content-center align-items-center",children:s.jsx("h3",{children:"Loading users..."})}):s.jsxs(s.Fragment,{children:[s.jsxs(c,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[s.jsx(d,{children:s.jsxs(m,{children:[s.jsx(j,{scope:"col",children:"Name"}),s.jsx(j,{scope:"col",children:"Username"}),s.jsx(j,{scope:"col",children:"Role"}),s.jsx(j,{scope:"col",children:"Email"}),s.jsx(j,{scope:"col",children:"Phone"}),s.jsx(j,{scope:"col",children:"Status"}),s.jsx(j,{scope:"col"})]})}),s.jsx(h,{children:r.map(((e,a)=>s.jsxs(m,{children:[s.jsx(x,{children:e.name}),s.jsx(x,{children:e.username}),s.jsx(x,{children:e.role}),s.jsx(x,{children:e.email}),s.jsx(x,{children:e.phone}),s.jsx(x,{children:e.status}),s.jsx(x,{children:s.jsxs("div",{className:"d-flex",children:[s.jsx(t,{size:"sm",color:"primary",onClick:()=>alert(`Edit ${e.name}`),children:"Edit"}),s.jsx(t,{size:"sm",color:"danger",onClick:()=>alert(`Delete ${e.name}`),className:"ms-2",children:"Delete"})]})})]},e.id)))})]}),s.jsx(u,{currentPage:i,setCurrentPage:o,totalPages:n,setTotalPages:b})]})]})};export{b as default};
